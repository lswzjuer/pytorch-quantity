syntax = "proto2";

package roadstar.dreamview;

message Component {
  enum Category {
    Hardware = 0;
    Software = 1;
    Others = 2;
  }
  optional string display_name = 1;
  // If the path is given, HMI will check if it's available.
  optional string path = 2;
  map<string, string> supported_commands = 3;
  // This is the category of the component
  optional Category category = 4;
}

message Mode {
  repeated string live_modules = 1;
  repeated string live_hardware = 2;
}

message HMIConfig {
  map<string, Component> modules = 1;          // {module_name: module}
  map<string, Component> hardware = 2;         // {hardware_name: hardware}
  map<string, Component> tools = 3;            // {tool_name: tool}
  map<string, string> available_vehicles = 5;  // {vehicle_name: vehicle_dir}
  map<string, Mode> modes = 6;                 // {mode_name: mode_config}
}

message VehicleData {
  // Upon switching vehicle, we need to copy source data to the dest path to
  // make it in effect.
  message DataFile {
    // Source path is a path relative to the vehicle data directory.
    optional string source_path = 1;
    // Dest path is where the data file could become in effect. It is allowed to
    // contain patterns such as "<ros>" which are able to finalize by
    // roadstar::common::util::TranslatePath().
    optional string dest_path = 2;
  }
  repeated DataFile data_files = 1;
}
